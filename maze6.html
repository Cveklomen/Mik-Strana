<!DOCTYPE html>
<html lang="mk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Безбеден Интернет Лавиринт</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    font-family: Arial, sans-serif;
    background-color: #f0f8ff;
  }
  #hud {
    position: absolute;
    top: 20px;
    left: 20px;
    color: white;
    font-size: 18px;
    background: rgba(0, 0, 0, 0.5);
    padding: 10px;
    border-radius: 10px;
  }
  #question-modal {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: none; /* Отстранета позадина */
  padding: 20px;
  border: none; /* Отстранување на рамката */
  text-align: center;
  z-index: 100;
  color: black; /* Текст во црна боја */
}

#question-modal h1 {
  font-size: 24px; /* Зголемен текст на прашањето */
  margin-bottom: 20px;
  color: #fff;
}

#answer-buttons button {
  margin: 15px; /* Поголем простор помеѓу копчињата */
  padding: 15px 30px; /* Поголеми копчиња */
  font-size: 18px; /* Поголем текст */
  cursor: pointer;
  border: 2px solid #555; /* Појасен раб */
  border-radius: 10px; /* Заоблени копчиња */
  background-color: #2196F3; /* Сина боја како стандард */
  color: white;
  transition: transform 0.2s, background-color 0.2s; /* Анимација за интеракција */
}

#answer-buttons button:hover {
  transform: scale(1.1); /* Зголемување при ховер */
  background-color: #1976D2; /* Малку потемна сина за ховер */
}
#difficulty-menu {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  background-color: rgba(0, 0, 0, 0.8); /* Темен прозорец */
  padding: 30px;
  border-radius: 10px;
  color: white;
  z-index: 1000;
}

#difficulty-menu h1 {
  font-size: 24px;
  margin-bottom: 20px;
}
button#easy-button:hover {
  background-color: #66bb6a; /* Посветло зелено за hover на Лесно */
  transform: scale(1.1); /* Лесно зголемување на копчето */
  transition: all 0.2s ease; /* Мазен ефект */
}

button#medium-button:hover {
  background-color: #ffb74d; /* Посветло портокалово за hover на Средно */
  transform: scale(1.1);
  transition: all 0.2s ease;
}

button#hard-button:hover {
  background-color: #e57373; /* Посветло црвено за hover на Тешко */
  transform: scale(1.1);
  transition: all 0.2s ease;
}



</style>
</head>
<body>
 
 <div id="difficulty-menu">
  <h1>Избери ниво на тежина</h1>
  <button id="easy-button" style="background-color: green; color: white; padding: 15px; font-size: 20px;">Лесно</button>
  <button id="medium-button" style="background-color: orange; color: white; padding: 15px; font-size: 20px;">Средно</button>
  <button id="hard-button" style="background-color: red; color: white; padding: 15px; font-size: 20px;">Тешко</button>
</div>


<div id="hud">Поени: 0 / </div>
<div id="question-modal">
  <h1 id="question-text"></h1>
  <div id="answer-buttons"></div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>




// Основна поставка на сцена
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 4000);

const renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);
//scene.background = new THREE.Color(0xFFFFFF); // Постави светла или транспарентна боја



// Поставки за осветлување
const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
scene.add(ambientLight);
const directionalLight = new THREE.DirectionalLight(0xffffff, 0.4);
directionalLight.position.set(10, 10, 10);
scene.add(directionalLight);

//херој
// Функција за креирање подетален автомобил
const createCar = () => {
  const car = new THREE.Group(); // Група за автомобилот

  // Тело на автомобилот
  const bodyGeometry = new THREE.BoxGeometry(3, 1, 2); // Геометрија за телото
  const bodyMaterial = new THREE.MeshPhongMaterial({ color: 0xff5733 }); // Портокалова боја
  const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
  body.position.y = 1; // Подигнато тело над подот
  car.add(body);

  // Прозорци
  const windowGeometry = new THREE.BoxGeometry(2.5, 0.6, 1.8);
  const windowMaterial = new THREE.MeshPhongMaterial({ color: 0x87CEEB, transparent: true, opacity: 0.5 }); // Сини прозорци
  const windows = new THREE.Mesh(windowGeometry, windowMaterial);
  windows.position.y = 1.5;
  car.add(windows);

  // Покрив
  const roofGeometry = new THREE.BoxGeometry(2.6, 0.2, 1.9);
  const roofMaterial = new THREE.MeshPhongMaterial({ color: 0xff4500 }); // Топло портокалов покрив
  const roof = new THREE.Mesh(roofGeometry, roofMaterial);
  roof.position.y = 1.8;
  car.add(roof);

  // Тркала
  const wheelGeometry = new THREE.CylinderGeometry(0.5, 0.5, 0.5, 32);
  const wheelMaterial = new THREE.MeshPhongMaterial({ color: 0x000000 }); // Црни тркала

  const addWheel = (x, z) => {
    const wheel = new THREE.Mesh(wheelGeometry, wheelMaterial);
    wheel.rotation.z = Math.PI / 2; // Ротирани тркала
    wheel.position.set(x, 0.5, z);
    car.add(wheel);
  };

  // Четири тркала
  addWheel(-1.5, -1); // Лево назад
  addWheel(1.5, -1);  // Десно назад
  addWheel(-1.5, 1);  // Лево напред
  addWheel(1.5, 1);   // Десно напред

  // Фарови
  const headlightGeometry = new THREE.SphereGeometry(0.2, 16, 16);
  const headlightMaterial = new THREE.MeshPhongMaterial({ color: 0xffff00 }); // Жолти фарови

  const addHeadlight = (x, z) => {
    const headlight = new THREE.Mesh(headlightGeometry, headlightMaterial);
    headlight.position.set(x, 1, z);
    car.add(headlight);
  };

  // Два фарови напред
  addHeadlight(-1.1, 1.1);
  addHeadlight(1.1, 1.1);

  return car;
};

// Замени го постојниот карактер со автомобил
const player = createCar(); // Креирај подетален автомобил
player.position.set(0, 1, 0); // Почетна позиција
scene.add(player); // Додади го во сцената


// Под (лавиринт)
const floor = new THREE.Mesh(
  new THREE.PlaneGeometry(400, 400),
  new THREE.MeshPhongMaterial({ color: 0x90EE90 })
  
);
floor.rotation.x = -Math.PI / 2;
scene.add(floor);

// Камера
camera.position.set(0, 5, 10);
camera.lookAt(player.position);

// Функција за креирање ѕидови
const walls = [];
const createWall = (x, z, width, height) => {
  const wall = new THREE.Mesh(
    new THREE.BoxGeometry(width, 10, height),
    new THREE.MeshPhongMaterial({ color: 0x808080 })
  );
  wall.position.set(x, 5, z);
  scene.add(wall);
  walls.push(wall);
};
// Функција за проверка на колизија со ѕидовите
const checkCollisionWithWalls = (newX, newZ) => {
  // Креирај кутија за автомобилот
  const carBox = new THREE.Box3().setFromObject(player);
  carBox.translate(new THREE.Vector3(newX - player.position.x, 0, newZ - player.position.z));

  // Провери дали кутијата на автомобилот се судира со некој од ѕидовите
  return walls.some(wall => {
    const wallBox = new THREE.Box3().setFromObject(wall);
    return carBox.intersectsBox(wallBox);
  });
};


// Надворешни ѕидови (прилагодени за поголем лавиринт)
createWall(0, -200, 400, 1);
createWall(0, 200, 400, 1);
createWall(-200, 0, 1, 400);
createWall(200, 0, 1, 400);

// Внатрешни ѕидови (скалирање x4)
createWall(-70, -50, 20, 1);
createWall(80, -30, 1, 40);
createWall(-120, 120, 50, 1);
createWall(30, 90, 1, 60);
createWall(-60, 0, 70, 1);
createWall(0, -80, 1, 100);
createWall(50, 50, 40, 1);
createWall(-90, -90, 1, 50);
createWall(110, -120, 60, 1);
createWall(-30, 60, 1, 90);
createWall(90, 30, 1, 70);
createWall(-110, 50, 40, 1);
createWall(-20, -140, 40, 1);
createWall(70, -70, 1, 80);
createWall(-140, -30, 60, 1);
createWall(20, 140, 1, 100);
createWall(-80, 80, 100, 1);
createWall(60, 110, 1, 50);
createWall(-50, -120, 70, 1);
createWall(130, -90, 1, 60);
createWall(-120, 30, 80, 1);
createWall(40, 40, 1, 70);
createWall(110, -40, 60, 1);
createWall(-40, 110, 1, 90);
createWall(90, 90, 50, 1);
createWall(-30, -170, 90, 1);
createWall(100, -150, 1, 70);
createWall(-170, -70, 80, 1);
createWall(10, 170, 1, 120);
createWall(-90, 110, 110, 1);
createWall(70, 130, 1, 60);
createWall(-20, -100, 90, 1);
createWall(140, -70, 1, 90);
createWall(-150, 70, 120, 1);
createWall(20, 50, 1, 110);
createWall(130, -20, 90, 1);
createWall(-60, 150, 1, 100);
createWall(110, 110, 70, 1);
createWall(-140, 0, 1, 80);
createWall(40, -120, 100, 1);

// Плави топки (прашања, остануваат исти)
// Креирање на 50 сфери (една за секое прашање)
const spheres = [];
const usedQuestions = [ { question: "Што е HTTP?", options: ["Протокол за пренос на хипертекст", "Програма за уредување", "Сервис за складирање", "Електронска пошта"], correct: 0 },
  { question: "Што значи фишинг?", options: ["Лов на информации", "Лажни пораки за измама", "Електронско тргување", "Игри на интернет"], correct: 1 },
  { question: "Кој е најдобар начин за сложена лозинка?", options: ["Користење само броеви", "Мешавина од симболи, букви и броеви", "Исти броеви во секоја лозинка", "Лесно предвидливи фрази"], correct: 1 },
  { question: "Што е сајбер-булинг?", options: ["Сајбер напади", "Онлајн малтретирање", "Кодирање страници", "Чатирање со пријатели"], correct: 1 },
  { question: "Што претставува зелена икона на веб адресата?", options: ["Сигурен сајт", "Лажен сајт", "Потврда за испраќање", "Ограничен пристап"], correct: 0 },
  { question: "Како можеш да спречиш вируси?", options: ["Инсталирање на антивирус", "Игнорирање пораки", "Користење лесни лозинки", "Споделување податоци"], correct: 0 },
  { question: "Што претставува личен податок?", options: ["Име", "Е-пошта", "Телефонски број", "Сите наведени"], correct: 3 },
  { question: "Која од следните информации е најдобро да не се споделува?", options: ["Твојата омилена боја", "Твојот матичен број", "Твојот омилен филм", "Твојот роденден"], correct: 1 },
  { question: "Како да препознаеш лажен сајт?", options: ["Нејасна URL адреса", "Има зелено HTTPS", "Е професионално дизајниран", "Го препорачуваат пријатели"], correct: 0 },
  { question: "Што да направиш ако добиеш сомнителна порака?", options: ["Да ја игнорираш", "Да ја отвориш", "Да ја пријавиш", "Да одговориш на пораката"], correct: 2 },
  { question: "Кои веб-сајтови се најбезбедни?", options: ["Со зелена заклучена икона", "Сајтови без лозинки", "Сајтови со многу реклами", "Сајтови без шифрирање"], correct: 0 },
  { question: "Како можеш да го заштитиш твојот компјутер?", options: ["Со фајрвол", "Со отворени порти", "Со исклучување антивирус", "Со симнување сè од интернет"], correct: 0 },
  { question: "Кој е пример за фишинг?", options: ["Лажна порака од банка", "Отворена веб страна", "Користење јавен Wi-Fi", "Објавување на социјалните медиуми"], correct: 0 },
  { question: "Која опција е најсигурна?", options: ["Двостепена автентикација", "Лозинка од 4 знаци", "Користење на истата лозинка", "Споделување лозинки со пријатели"], correct: 0 },
  { question: "Која е функцијата на антивирусниот софтвер?", options: ["Да ги отстрани вирусите", "Да креира е-пошта", "Да чува резервни копии", "Да генерира лозинки"], correct: 0 },
  { question: "Која е најголемата опасност од јавен Wi-Fi?", options: ["Нема шифрирање", "Го користат многу луѓе", "Бавен интернет", "Голем број реклами"], correct: 0 },
  { question: "Што треба да направиш со сомнителни прилози во е-пошта?", options: ["Да ги отвориш веднаш", "Да ги избришеш", "Да ги споделиш со други", "Да ги зачуваш"], correct: 1 },
  { question: "Која е добра пракса за онлајн плаќања?", options: ["Користење безбедна платформа", "Користење на јавен компјутер", "Споделување податоци на социјални медиуми", "Користење едноставна лозинка"], correct: 0 },
  { question: "Што треба да направиш ако изгубиш мобилен телефон?", options: ["Да го пријавиш на властите", "Да го оставиш", "Да отвориш нов профил", "Да ја смениш лозинката"], correct: 0 },
  { question: "Што е малвер?", options: ["Штетен софтвер", "Безбедносна алатка", "Програма за заштита", "Систем за е-пошта"], correct: 0 },
  { question: "Кој е главен знак на лажен сајт?", options: ["Сомнителна URL адреса", "Професионален дизајн", "Брзо вчитување", "Многу посети"], correct: 0 },
  { question: "Што треба да направиш ако се сомневаш на пробивање на безбедноста?", options: ["Да ја смениш лозинката веднаш", "Да го игнорираш", "Да прашаш пријател", "Да исклучиш интернет"], correct: 0 },
  { question: "Што претставува двостепена автентикација?", options: ["Дополнителен слој на заштита", "Едноставно логирање", "Користење јавен компјутер", "Споделување лозинки"], correct: 0 },
  { question: "Која е важноста на ажурирањата на софтверот?", options: ["Поправки на безбедност", "Побрза работа", "Промени на интерфејсот", "Нови бои"], correct: 0 },
  { question: "Што е главна цел на лажни пораки?", options: ["Крадење информации", "Споделување новости", "Испраќање фотографии", "Организирање состаноци"], correct: 0 },
  { question: "Како можеш да ги заштитиш своите лични податоци?", options: ["Користење на силни лозинки", "Објавување јавни податоци", "Користење слаб Wi-Fi", "Повеќе профили на еден сајт"], correct: 0 },
  { question: "Која е најдобра пракса за онлајн купување?", options: ["Користење сигурни сајтови", "Плаќање на јавни компјутери", "Давање лични податоци на секого", "Споделување на лозинки"], correct: 0 },
  { question: "Што претставува ICO?", options: ["Initial Coin Offering", "Интернет копија", "Скрипта за криптирање", "Сигурна автентикација"], correct: 0 },
  { question: "Што е најдобро да направиш со лажни пораки?", options: ["Да ги пријавиш", "Да ги зачуваш", "Да ги игнорираш", "Да ги пратиш на пријател"], correct: 0 },
  { question: "Што е главна улога на фајрвол?", options: ["Да спречи несакани пристапи", "Да генерира лозинки", "Да испраќа е-пошта", "Да складира податоци"], correct: 0 },
  { question: "Која лозинка е најсигурна?", options: ["Мешана со броеви, букви и симболи", "Само броеви", "Едноставни фрази", "Исти броеви за сите профили"], correct: 0 },
  { question: "Што е главна улога на резервни копии?", options: ["Чување на податоци за безбедност", "Создавање лозинки", "Побрзо логирање", "Уредување слики"], correct: 0 },
 { question: "Која е најдобра заштита од фишинг напади?", options: ["Избегнување сомнителни линкови", "Користење јавен Wi-Fi", "Споделување податоци со сите", "Користење едноставни лозинки"], correct: 0 },
{ question: "Што претставува Ransomware?", options: ["Софтвер што блокира пристап до податоци", "Апликација за игри", "Мрежен сообраќај", "Мрежа за учење"], correct: 0 },
{ question: "Што треба да направиш пред да симнеш датотека?", options: ["Провери го изворот", "Да ја отворам веднаш", "Да ја пратам на пријател", "Да ја симнам на јавен компјутер"], correct: 0 },
{ question: "Како можеш да препознаеш фишинг порака?", options: ["Содржи итен повик за акција", "Има формално обраќање", "Има точен домен", "Испратена од пријател"], correct: 0 },
{ question: "Која е улогата на шифрирањето?", options: ["Заштита на податоци", "Пренос на вируси", "Брзо интернет сурфање", "Креирање резервни копии"], correct: 0 },
{ question: "Што значи две-факторска автентикација?", options: ["Два начини за верификација", "Два профили на ист сајт", "Истата лозинка два пати", "Без дополнителни проверки"], correct: 0 },
{ question: "Кога треба да ја ажурираш твојата лозинка?", options: ["Редовно", "Само кога е пробиена", "Никогаш", "Секој ден"], correct: 0 },
{ question: "Што да направиш ако еден од твоите профили е хакнат?", options: ["Смени ја лозинката веднаш", "Игнорирај го", "Креирај нов профил", "Сподели го со други"], correct: 0 },
{ question: "Како можеш да се заштитиш од кражба на идентитет?", options: ["Не споделувај лични податоци", "Отворај е-пораки од непознати", "Користи јавен Wi-Fi", "Користи иста лозинка"], correct: 0 },
{ question: "Која е улогата на резервните копии?", options: ["Чување податоци за обновување", "Брзо отворање датотеки", "Кодирање на програми", "Управување со лозинки"], correct: 0 },
{ question: "Што е VPN?", options: ["Приватна мрежа за безбедно сурфање", "Сервис за игри", "Софтвер за датотеки", "Мрежа за рекламирање"], correct: 0 },
{ question: "Која е опасноста од јавен компјутер?", options: ["Потенцијално складирање лозинки", "Побрзо сурфање", "Бесплатни услуги", "Посилна заштита"], correct: 0 },
{ question: "Како можеш да спречиш сајбер напади?", options: ["Ажурирање на софтверот", "Користење стари програми", "Отворање линкови од сомнителни извори", "Користење јавни Wi-Fi мрежи"], correct: 0 },
{ question: "Што претставуваат сигурносни прашања?", options: ["Дополнителна заштита за профил", "Јавни прашања", "Користење лесни одговори", "Секогаш исти за сите профили"], correct: 0 },
{ question: "Која е најголемата опасност при користење на јавен Wi-Fi?", options: ["Кражба на информации", "Бавен интернет", "Многу реклами", "Пренос на датотеки"], correct: 0 },
{ question: "Што значи 'secure password storage'?", options: ["Безбедно чување лозинки", "Чување лозинки на јавен компјутер", "Споделување лозинки", "Користење јавни програми"], correct: 0 },
{ question: "Што да направиш ако примиш сомнителен линк?", options: ["Да го пријавиш", "Да го отвориш", "Да го споделиш", "Да го зачуваш"], correct: 0 },
{ question: "Кој е главен знак на малициозна веб-страна?", options: ["Лажна URL адреса", "Зелена HTTPS икона", "Многу корисници", "Брзо вчитување"], correct: 0 },
{ question: "Што претставува 'social engineering' напад?", options: ["Измами за добивање лични податоци", "Креирање софтвер", "Развивање веб-страни", "Користење антивирус"], correct: 0 },
{ question: "Како можеш да препознаеш сигурен сајт?", options: ["Има HTTPS", "Има реклами", "Не бара лозинка", "Има непозната URL адреса"], correct: 0 },
{ question: "Што е 'spyware'?", options: ["Шпионски софтвер за следење", "Антивирус програма", "Програм за заштита", "Веб-прелистувач"], correct: 0 },
{ question: "Кој е најдобар начин за спречување на сајбер напади?", options: ["Сложени лозинки", "Иста лозинка за сите профили", "Редовно отворање сомнителни линкови", "Игнорирање ажурирања"], correct: 0 },
{ question: "Која е улогата на 'firewall'?", options: ["Спречување несакан пристап", "Брзо вчитување", "Чување лозинки", "Пренос на датотеки"], correct: 0 },
{ question: "Што е 'adware'?", options: ["Рекламен софтвер", "Антивирус програма", "Сервис за криптирање", "Сервис за лозинки"], correct: 0 },
{ question: "Кој е најдобар начин за заштита на твоите профили?", options: ["Двостепена автентикација", "Користење иста лозинка за сите", "Користење јавни мрежи", "Игнорирање ажурирања"], correct: 0 },
{ question: "Што е клучно за препознавање сигурна е-пошта?", options: ["Проверка на изворот", "Отворање веднаш", "Кликнување на сите линкови", "Споделување со сите"], correct: 0 },
{ question: "Што значи 'pharming'?", options: ["Пренасочување на корисници на лажни сајтови", "Креирање лозинки", "Споделување податоци", "Играње видео игри"], correct: 0 },
{ question: "Како се препознава социјален инженеринг?", options: ["Манипулација за добивање информации", "Безбедносен софтвер", "Антивирусна програма", "Рекламен сајт"], correct: 0 },
{ question: "Што е клучно при користење јавен Wi-Fi?", options: ["Избегнување лични трансакции", "Споделување податоци", "Отворање на сите линкови", "Заборавање лозинки"], correct: 0 },
{ question: "Што треба да направиш со сомнителни е-пораки?", options: ["Пријави ги веднаш", "Отвори ги", "Кликни на линковите", "Сподели ги со сите"], correct: 0 },
{ question: "Што претставува 'brute force attack'?", options: ["Напади со пробување многу лозинки", "Создавање веб-страни", "Безбедност на профили", "Користење двоен фактор"], correct: 0 },
{ question: "Која е целта на 'trojan horse'?", options: ["Да зарази компјутери со малициозен софтвер", "Да ја подобри брзината", "Да чува резервни копии", "Да креира лозинки"], correct: 0 },
{ question: "Која е улогата на 'password manager'?", options: ["Чување и генерирање силни лозинки", "Споделување лозинки со пријатели", "Користење едноставни лозинки", "Креирање јавни лозинки"], correct: 0 },
{ question: "Што е 'zero-day vulnerability'?", options: ["Безбедносен проблем без познато решение", "Нова апликација", "Резервна копија", "Скрипта за програмирање"], correct: 0 },
{ question: "Што претставува 'two-factor authentication'?", options: ["Дополнителна безбедност преку втор начин на верификација", "Иста лозинка два пати", "Споделување лозинки", "Користење јавни мрежи"], correct: 0 },
{ question: "Кој е најдобар начин да ги избегнеш фишинг нападите?", options: ["Да избегнуваш сомнителни линкови", "Да кликнеш на сите линкови", "Да користиш јавен Wi-Fi", "Да внесеш информации на било кој сајт"], correct: 0 },
{ question: "Што е 'encryption'?", options: ["Метод за заштита на податоци со кодирање", "Програма за чување лозинки", "Јавна мрежа", "Метод за бришење податоци"], correct: 0 },
{ question: "Која е улогата на антивирусен софтвер?", options: ["Спречување и отстранување на малициозни програми", "Создавање резерва на податоци", "Забрзување на компјутерот", "Користење јавни мрежи"], correct: 0 },
{ question: "Која е главна опасност од 'ransomware'?", options: ["Заклучување на податоци додека не се плати откуп", "Користење стари уреди", "Бавен интернет", "Создавање лозинки"], correct: 0 },
{ question: "Што значи 'multi-factor authentication'?", options: ["Користење повеќе методи за верификација", "Користење само лозинка", "Споделување податоци", "Користење ист профил"], correct: 0 },
{ question: "Што претставува 'malicious URL'?", options: ["Линк што води до опасна веб страница", "Проверен и безбеден линк", "Случаен линк", "Линк со многу реклами"], correct: 0 },
{ question: "Како можеш да го препознаеш 'spoofing' нападот?", options: ["Лажна порака или веб адреса што изгледа легитимна", "Програма за учење", "Сервис за заштита", "Оглас на интернет"], correct: 0 },
{ question: "Што претставува 'denial-of-service attack'?", options: ["Преплавување на сервер со барања за да стане неупотреблив", "Создавање нов профил", "Подобрување на мрежната брзина", "Чување лозинки"], correct: 0 },
{ question: "Што да направиш ако сајтот изгледа сомнителен?", options: ["Да го избегнеш", "Да внесеш податоци", "Да го зачуваш линкот", "Да го споделиш со други"], correct: 0 },
{ question: "Што е 'strong password'?", options: ["Лозинка со мешавина од букви, броеви и симболи", "Лесна за паметење", "Само броеви", "Повторување на ист знак"], correct: 0 },
{ question: "Која е целта на 'phishing email'?", options: ["Крадење лични информации преку лажна е-пошта", "Известување за нови функции", "Креирање резервни копии", "Објавување реклами"], correct: 0 },
{ question: "Што е 'keylogger'?", options: ["Софтвер за снимање внес на тастатура", "Антивирусен софтвер", "Апликација за пораки", "Програма за лозинки"], correct: 0 },
{ question: "Што претставува 'unauthorized access'?", options: ["Пристап до податоци без дозвола", "Пристап со лозинка", "Јавен пристап", "Легитимна акција"], correct: 0 },
{ question: "Што претставува 'spam email'?", options: ["Несакани е-пораки", "Верифицирани пораки", "Пораки од пријатели", "Легитимни промоции"], correct: 0 },
{ question: "Како да се заштитиш од 'brute force' напади?", options: ["Користење силни лозинки", "Исти лозинки за сите профили", "Не менување лозинки", "Избегнување ажурирања"], correct: 0 },
{ question: "Што е 'digital footprint'?", options: ["Трага од твоите онлајн активности", "Чување лозинки", "Користење јавни мрежи", "Програма за складирање"], correct: 0 },
{ question: "Што претставува 'malware'?", options: ["Штетен софтвер", "Антивирусен софтвер", "Рекламен софтвер", "Програма за лозинки"], correct: 0 },
{ question: "Што треба да направиш за сомнителни веб страни?", options: ["Да ги избегнуваш", "Да ги споделиш", "Да ги зачуваш", "Да ги отвораш"], correct: 0 },
{ question: "Што претставува 'data breach'?", options: ["Несакано откривање на податоци", "Промена на лозинки", "Создавање нов профил", "Испраќање е-пораки"], correct: 0 },
{ question: "Како можеш да се заштитиш од 'social engineering'?", options: ["Биди внимателен со лични информации", "Споделувај лозинки", "Користи јавни Wi-Fi мрежи", "Кликни на сите линкови"], correct: 0 },
{ question: "Што е 'Trojan'?", options: ["Штетен софтвер што се маскира како легитимен", "Антивирусна програма", "Безбедносна алатка", "Апликација за пораки"], correct: 0 },
{ question: "Што претставува 'patch update'?", options: ["Поправка на софтверски проблеми", "Создавање лозинки", "Побрзо вчитување", "Нов интерфејс"], correct: 0 },
{ question: "Која е улогата на 'network firewall'?", options: ["Спречување несакан пристап до мрежата", "Чување лозинки", "Побрзо вчитување", "Креирање резервни копии"], correct: 0 },
{ question: "Што претставува 'pharming'?", options: ["Пренасочување на корисници кон лажни веб страници", "Чување лозинки", "Редовно ажурирање", "Проверка на е-пошта"], correct: 0 },
{ question: "Што е 'botnet'?", options: ["Мрежа од заразени уреди контролирани од хакери", "Збирка на лозинки", "Антивирусна програма", "Апликација за сурфање"], correct: 0 },
{ question: "Како можеш да препознаеш 'scam email'?", options: ["Содржи лажни ветувања", "Испратена од познат домен", "Има зелена икона", "Има познат линк"], correct: 0 },
{ question: "Што е 'clickjacking'?", options: ["Манипулација за кликање на лажни линкови", "Создавање лозинки", "Објавување содржина", "Програма за е-пошта"], correct: 0 }
]; // Копирај ја листата со прашања за да не се повторуваат

for (let i = 0; i < usedQuestions.length; i++) {
  const sphere = new THREE.Mesh(
    new THREE.SphereGeometry(1, 32, 32),
    new THREE.MeshPhongMaterial({ color: 0x0000ff }) // Сина боја за сферите
  );

  // Позиционирај ја топката на случајна позиција во лавиринтот
  sphere.position.set(
    Math.random() * 380 - 190, // Случајна x позиција
    1, // Висина на топката
    Math.random() * 380 - 190 // Случајна z позиција
  );

  scene.add(sphere); // Додади ја топката во сцената
  spheres.push(sphere); // Додади ја топката во низата
}


// Прашања и одговори
const questions = [
  { question: "Што е HTTP?", options: ["Протокол за пренос на хипертекст", "Програма за уредување", "Сервис за складирање", "Електронска пошта"], correct: 0 },
  { question: "Што значи фишинг?", options: ["Лов на информации", "Лажни пораки за измама", "Електронско тргување", "Игри на интернет"], correct: 1 },
  { question: "Кој е најдобар начин за сложена лозинка?", options: ["Користење само броеви", "Мешавина од симболи, букви и броеви", "Исти броеви во секоја лозинка", "Лесно предвидливи фрази"], correct: 1 },
  { question: "Што е сајбер-булинг?", options: ["Сајбер напади", "Онлајн малтретирање", "Кодирање страници", "Чатирање со пријатели"], correct: 1 },
  { question: "Што претставува зелена икона на веб адресата?", options: ["Сигурен сајт", "Лажен сајт", "Потврда за испраќање", "Ограничен пристап"], correct: 0 },
  { question: "Како можеш да спречиш вируси?", options: ["Инсталирање на антивирус", "Игнорирање пораки", "Користење лесни лозинки", "Споделување податоци"], correct: 0 },
  { question: "Што претставува личен податок?", options: ["Име", "Е-пошта", "Телефонски број", "Сите наведени"], correct: 3 },
  { question: "Која од следните информации е најдобро да не се споделува?", options: ["Твојата омилена боја", "Твојот матичен број", "Твојот омилен филм", "Твојот роденден"], correct: 1 },
  { question: "Како да препознаеш лажен сајт?", options: ["Нејасна URL адреса", "Има зелено HTTPS", "Е професионално дизајниран", "Го препорачуваат пријатели"], correct: 0 },
  { question: "Што да направиш ако добиеш сомнителна порака?", options: ["Да ја игнорираш", "Да ја отвориш", "Да ја пријавиш", "Да одговориш на пораката"], correct: 2 },
  { question: "Кои веб-сајтови се најбезбедни?", options: ["Со зелена заклучена икона", "Сајтови без лозинки", "Сајтови со многу реклами", "Сајтови без шифрирање"], correct: 0 },
  { question: "Како можеш да го заштитиш твојот компјутер?", options: ["Со фајрвол", "Со отворени порти", "Со исклучување антивирус", "Со симнување сè од интернет"], correct: 0 },
  { question: "Кој е пример за фишинг?", options: ["Лажна порака од банка", "Отворена веб страна", "Користење јавен Wi-Fi", "Објавување на социјалните медиуми"], correct: 0 },
  { question: "Која опција е најсигурна?", options: ["Двостепена автентикација", "Лозинка од 4 знаци", "Користење на истата лозинка", "Споделување лозинки со пријатели"], correct: 0 },
  { question: "Која е функцијата на антивирусниот софтвер?", options: ["Да ги отстрани вирусите", "Да креира е-пошта", "Да чува резервни копии", "Да генерира лозинки"], correct: 0 },
  { question: "Која е најголемата опасност од јавен Wi-Fi?", options: ["Нема шифрирање", "Го користат многу луѓе", "Бавен интернет", "Голем број реклами"], correct: 0 },
  { question: "Што треба да направиш со сомнителни прилози во е-пошта?", options: ["Да ги отвориш веднаш", "Да ги избришеш", "Да ги споделиш со други", "Да ги зачуваш"], correct: 1 },
  { question: "Која е добра пракса за онлајн плаќања?", options: ["Користење безбедна платформа", "Користење на јавен компјутер", "Споделување податоци на социјални медиуми", "Користење едноставна лозинка"], correct: 0 },
  { question: "Што треба да направиш ако изгубиш мобилен телефон?", options: ["Да го пријавиш на властите", "Да го оставиш", "Да отвориш нов профил", "Да ја смениш лозинката"], correct: 0 },
  { question: "Што е малвер?", options: ["Штетен софтвер", "Безбедносна алатка", "Програма за заштита", "Систем за е-пошта"], correct: 0 },
  { question: "Кој е главен знак на лажен сајт?", options: ["Сомнителна URL адреса", "Професионален дизајн", "Брзо вчитување", "Многу посети"], correct: 0 },
  { question: "Што треба да направиш ако се сомневаш на пробивање на безбедноста?", options: ["Да ја смениш лозинката веднаш", "Да го игнорираш", "Да прашаш пријател", "Да исклучиш интернет"], correct: 0 },
  { question: "Што претставува двостепена автентикација?", options: ["Дополнителен слој на заштита", "Едноставно логирање", "Користење јавен компјутер", "Споделување лозинки"], correct: 0 },
  { question: "Која е важноста на ажурирањата на софтверот?", options: ["Поправки на безбедност", "Побрза работа", "Промени на интерфејсот", "Нови бои"], correct: 0 },
  { question: "Што е главна цел на лажни пораки?", options: ["Крадење информации", "Споделување новости", "Испраќање фотографии", "Организирање состаноци"], correct: 0 },
  { question: "Како можеш да ги заштитиш своите лични податоци?", options: ["Користење на силни лозинки", "Објавување јавни податоци", "Користење слаб Wi-Fi", "Повеќе профили на еден сајт"], correct: 0 },
  { question: "Која е најдобра пракса за онлајн купување?", options: ["Користење сигурни сајтови", "Плаќање на јавни компјутери", "Давање лични податоци на секого", "Споделување на лозинки"], correct: 0 },
  { question: "Што претставува ICO?", options: ["Initial Coin Offering", "Интернет копија", "Скрипта за криптирање", "Сигурна автентикација"], correct: 0 },
  { question: "Што е најдобро да направиш со лажни пораки?", options: ["Да ги пријавиш", "Да ги зачуваш", "Да ги игнорираш", "Да ги пратиш на пријател"], correct: 0 },
  { question: "Што е главна улога на фајрвол?", options: ["Да спречи несакани пристапи", "Да генерира лозинки", "Да испраќа е-пошта", "Да складира податоци"], correct: 0 },
  { question: "Која лозинка е најсигурна?", options: ["Мешана со броеви, букви и симболи", "Само броеви", "Едноставни фрази", "Исти броеви за сите профили"], correct: 0 },
  { question: "Што е главна улога на резервни копии?", options: ["Чување на податоци за безбедност", "Создавање лозинки", "Побрзо логирање", "Уредување слики"], correct: 0 },
 { question: "Која е најдобра заштита од фишинг напади?", options: ["Избегнување сомнителни линкови", "Користење јавен Wi-Fi", "Споделување податоци со сите", "Користење едноставни лозинки"], correct: 0 },
{ question: "Што претставува Ransomware?", options: ["Софтвер што блокира пристап до податоци", "Апликација за игри", "Мрежен сообраќај", "Мрежа за учење"], correct: 0 },
{ question: "Што треба да направиш пред да симнеш датотека?", options: ["Провери го изворот", "Да ја отворам веднаш", "Да ја пратам на пријател", "Да ја симнам на јавен компјутер"], correct: 0 },
{ question: "Како можеш да препознаеш фишинг порака?", options: ["Содржи итен повик за акција", "Има формално обраќање", "Има точен домен", "Испратена од пријател"], correct: 0 },
{ question: "Која е улогата на шифрирањето?", options: ["Заштита на податоци", "Пренос на вируси", "Брзо интернет сурфање", "Креирање резервни копии"], correct: 0 },
{ question: "Што значи две-факторска автентикација?", options: ["Два начини за верификација", "Два профили на ист сајт", "Истата лозинка два пати", "Без дополнителни проверки"], correct: 0 },
{ question: "Кога треба да ја ажурираш твојата лозинка?", options: ["Редовно", "Само кога е пробиена", "Никогаш", "Секој ден"], correct: 0 },
{ question: "Што да направиш ако еден од твоите профили е хакнат?", options: ["Смени ја лозинката веднаш", "Игнорирај го", "Креирај нов профил", "Сподели го со други"], correct: 0 },
{ question: "Како можеш да се заштитиш од кражба на идентитет?", options: ["Не споделувај лични податоци", "Отворај е-пораки од непознати", "Користи јавен Wi-Fi", "Користи иста лозинка"], correct: 0 },
{ question: "Која е улогата на резервните копии?", options: ["Чување податоци за обновување", "Брзо отворање датотеки", "Кодирање на програми", "Управување со лозинки"], correct: 0 },
{ question: "Што е VPN?", options: ["Приватна мрежа за безбедно сурфање", "Сервис за игри", "Софтвер за датотеки", "Мрежа за рекламирање"], correct: 0 },
{ question: "Која е опасноста од јавен компјутер?", options: ["Потенцијално складирање лозинки", "Побрзо сурфање", "Бесплатни услуги", "Посилна заштита"], correct: 0 },
{ question: "Како можеш да спречиш сајбер напади?", options: ["Ажурирање на софтверот", "Користење стари програми", "Отворање линкови од сомнителни извори", "Користење јавни Wi-Fi мрежи"], correct: 0 },
{ question: "Што претставуваат сигурносни прашања?", options: ["Дополнителна заштита за профил", "Јавни прашања", "Користење лесни одговори", "Секогаш исти за сите профили"], correct: 0 },
{ question: "Која е најголемата опасност при користење на јавен Wi-Fi?", options: ["Кражба на информации", "Бавен интернет", "Многу реклами", "Пренос на датотеки"], correct: 0 },
{ question: "Што значи 'secure password storage'?", options: ["Безбедно чување лозинки", "Чување лозинки на јавен компјутер", "Споделување лозинки", "Користење јавни програми"], correct: 0 },
{ question: "Што да направиш ако примиш сомнителен линк?", options: ["Да го пријавиш", "Да го отвориш", "Да го споделиш", "Да го зачуваш"], correct: 0 },
{ question: "Кој е главен знак на малициозна веб-страна?", options: ["Лажна URL адреса", "Зелена HTTPS икона", "Многу корисници", "Брзо вчитување"], correct: 0 },
{ question: "Што претставува 'social engineering' напад?", options: ["Измами за добивање лични податоци", "Креирање софтвер", "Развивање веб-страни", "Користење антивирус"], correct: 0 },
{ question: "Како можеш да препознаеш сигурен сајт?", options: ["Има HTTPS", "Има реклами", "Не бара лозинка", "Има непозната URL адреса"], correct: 0 },
{ question: "Што е 'spyware'?", options: ["Шпионски софтвер за следење", "Антивирус програма", "Програм за заштита", "Веб-прелистувач"], correct: 0 },
{ question: "Кој е најдобар начин за спречување на сајбер напади?", options: ["Сложени лозинки", "Иста лозинка за сите профили", "Редовно отворање сомнителни линкови", "Игнорирање ажурирања"], correct: 0 },
{ question: "Која е улогата на 'firewall'?", options: ["Спречување несакан пристап", "Брзо вчитување", "Чување лозинки", "Пренос на датотеки"], correct: 0 },
{ question: "Што е 'adware'?", options: ["Рекламен софтвер", "Антивирус програма", "Сервис за криптирање", "Сервис за лозинки"], correct: 0 },
{ question: "Кој е најдобар начин за заштита на твоите профили?", options: ["Двостепена автентикација", "Користење иста лозинка за сите", "Користење јавни мрежи", "Игнорирање ажурирања"], correct: 0 },
{ question: "Што е клучно за препознавање сигурна е-пошта?", options: ["Проверка на изворот", "Отворање веднаш", "Кликнување на сите линкови", "Споделување со сите"], correct: 0 },
{ question: "Што значи 'pharming'?", options: ["Пренасочување на корисници на лажни сајтови", "Креирање лозинки", "Споделување податоци", "Играње видео игри"], correct: 0 },
{ question: "Како се препознава социјален инженеринг?", options: ["Манипулација за добивање информации", "Безбедносен софтвер", "Антивирусна програма", "Рекламен сајт"], correct: 0 },
{ question: "Што е клучно при користење јавен Wi-Fi?", options: ["Избегнување лични трансакции", "Споделување податоци", "Отворање на сите линкови", "Заборавање лозинки"], correct: 0 },
{ question: "Што треба да направиш со сомнителни е-пораки?", options: ["Пријави ги веднаш", "Отвори ги", "Кликни на линковите", "Сподели ги со сите"], correct: 0 },
{ question: "Што претставува 'brute force attack'?", options: ["Напади со пробување многу лозинки", "Создавање веб-страни", "Безбедност на профили", "Користење двоен фактор"], correct: 0 },
{ question: "Која е целта на 'trojan horse'?", options: ["Да зарази компјутери со малициозен софтвер", "Да ја подобри брзината", "Да чува резервни копии", "Да креира лозинки"], correct: 0 },
{ question: "Која е улогата на 'password manager'?", options: ["Чување и генерирање силни лозинки", "Споделување лозинки со пријатели", "Користење едноставни лозинки", "Креирање јавни лозинки"], correct: 0 },
{ question: "Што е 'zero-day vulnerability'?", options: ["Безбедносен проблем без познато решение", "Нова апликација", "Резервна копија", "Скрипта за програмирање"], correct: 0 },
{ question: "Што претставува 'two-factor authentication'?", options: ["Дополнителна безбедност преку втор начин на верификација", "Иста лозинка два пати", "Споделување лозинки", "Користење јавни мрежи"], correct: 0 },
{ question: "Кој е најдобар начин да ги избегнеш фишинг нападите?", options: ["Да избегнуваш сомнителни линкови", "Да кликнеш на сите линкови", "Да користиш јавен Wi-Fi", "Да внесеш информации на било кој сајт"], correct: 0 },
{ question: "Што е 'encryption'?", options: ["Метод за заштита на податоци со кодирање", "Програма за чување лозинки", "Јавна мрежа", "Метод за бришење податоци"], correct: 0 },
{ question: "Која е улогата на антивирусен софтвер?", options: ["Спречување и отстранување на малициозни програми", "Создавање резерва на податоци", "Забрзување на компјутерот", "Користење јавни мрежи"], correct: 0 },
{ question: "Која е главна опасност од 'ransomware'?", options: ["Заклучување на податоци додека не се плати откуп", "Користење стари уреди", "Бавен интернет", "Создавање лозинки"], correct: 0 },
{ question: "Што значи 'multi-factor authentication'?", options: ["Користење повеќе методи за верификација", "Користење само лозинка", "Споделување податоци", "Користење ист профил"], correct: 0 },
{ question: "Што претставува 'malicious URL'?", options: ["Линк што води до опасна веб страница", "Проверен и безбеден линк", "Случаен линк", "Линк со многу реклами"], correct: 0 },
{ question: "Како можеш да го препознаеш 'spoofing' нападот?", options: ["Лажна порака или веб адреса што изгледа легитимна", "Програма за учење", "Сервис за заштита", "Оглас на интернет"], correct: 0 },
{ question: "Што претставува 'denial-of-service attack'?", options: ["Преплавување на сервер со барања за да стане неупотреблив", "Создавање нов профил", "Подобрување на мрежната брзина", "Чување лозинки"], correct: 0 },
{ question: "Што да направиш ако сајтот изгледа сомнителен?", options: ["Да го избегнеш", "Да внесеш податоци", "Да го зачуваш линкот", "Да го споделиш со други"], correct: 0 },
{ question: "Што е 'strong password'?", options: ["Лозинка со мешавина од букви, броеви и симболи", "Лесна за паметење", "Само броеви", "Повторување на ист знак"], correct: 0 },
{ question: "Која е целта на 'phishing email'?", options: ["Крадење лични информации преку лажна е-пошта", "Известување за нови функции", "Креирање резервни копии", "Објавување реклами"], correct: 0 },
{ question: "Што е 'keylogger'?", options: ["Софтвер за снимање внес на тастатура", "Антивирусен софтвер", "Апликација за пораки", "Програма за лозинки"], correct: 0 },
{ question: "Што претставува 'unauthorized access'?", options: ["Пристап до податоци без дозвола", "Пристап со лозинка", "Јавен пристап", "Легитимна акција"], correct: 0 },
{ question: "Што претставува 'spam email'?", options: ["Несакани е-пораки", "Верифицирани пораки", "Пораки од пријатели", "Легитимни промоции"], correct: 0 },
{ question: "Како да се заштитиш од 'brute force' напади?", options: ["Користење силни лозинки", "Исти лозинки за сите профили", "Не менување лозинки", "Избегнување ажурирања"], correct: 0 },
{ question: "Што е 'digital footprint'?", options: ["Трага од твоите онлајн активности", "Чување лозинки", "Користење јавни мрежи", "Програма за складирање"], correct: 0 },
{ question: "Што претставува 'malware'?", options: ["Штетен софтвер", "Антивирусен софтвер", "Рекламен софтвер", "Програма за лозинки"], correct: 0 },
{ question: "Што треба да направиш за сомнителни веб страни?", options: ["Да ги избегнуваш", "Да ги споделиш", "Да ги зачуваш", "Да ги отвораш"], correct: 0 },
{ question: "Што претставува 'data breach'?", options: ["Несакано откривање на податоци", "Промена на лозинки", "Создавање нов профил", "Испраќање е-пораки"], correct: 0 },
{ question: "Како можеш да се заштитиш од 'social engineering'?", options: ["Биди внимателен со лични информации", "Споделувај лозинки", "Користи јавни Wi-Fi мрежи", "Кликни на сите линкови"], correct: 0 },
{ question: "Што е 'Trojan'?", options: ["Штетен софтвер што се маскира како легитимен", "Антивирусна програма", "Безбедносна алатка", "Апликација за пораки"], correct: 0 },
{ question: "Што претставува 'patch update'?", options: ["Поправка на софтверски проблеми", "Создавање лозинки", "Побрзо вчитување", "Нов интерфејс"], correct: 0 },
{ question: "Која е улогата на 'network firewall'?", options: ["Спречување несакан пристап до мрежата", "Чување лозинки", "Побрзо вчитување", "Креирање резервни копии"], correct: 0 },
{ question: "Што претставува 'pharming'?", options: ["Пренасочување на корисници кон лажни веб страници", "Чување лозинки", "Редовно ажурирање", "Проверка на е-пошта"], correct: 0 },
{ question: "Што е 'botnet'?", options: ["Мрежа од заразени уреди контролирани од хакери", "Збирка на лозинки", "Антивирусна програма", "Апликација за сурфање"], correct: 0 },
{ question: "Како можеш да препознаеш 'scam email'?", options: ["Содржи лажни ветувања", "Испратена од познат домен", "Има зелена икона", "Има познат линк"], correct: 0 },
{ question: "Што е 'clickjacking'?", options: ["Манипулација за кликање на лажни линкови", "Создавање лозинки", "Објавување содржина", "Програма за е-пошта"], correct: 0 }
];


// Играч ротација и движење
let moveForward = false, moveBackward = false;
let rotateLeft = false, rotateRight = false;

const playerDirection = new THREE.Vector3(0, 0, -1);
let angle = 0;

// Контроли за играч
window.addEventListener('keydown', (event) => {
  switch (event.code) {
    case 'ArrowUp': moveForward = true; break;
    case 'ArrowDown': moveBackward = true; break;
    case 'ArrowLeft': rotateLeft = true; break;
    case 'ArrowRight': rotateRight = true; break;
  }
});
window.addEventListener('keyup', (event) => {
  switch (event.code) {
    case 'ArrowUp': moveForward = false; break;
    case 'ArrowDown': moveBackward = false; break;
    case 'ArrowLeft': rotateLeft = false; break;
    case 'ArrowRight': rotateRight = false; break;
  }
});

// Колизија со ѕидови
const checkCollision = (x, z) => {
  const playerBox = new THREE.Box3().setFromObject(player);
  playerBox.translate(new THREE.Vector3(x - player.position.x, 0, z - player.position.z));
  return walls.some(wall => {
    const wallBox = new THREE.Box3().setFromObject(wall);
    return playerBox.intersectsBox(wallBox);
  });
};
const checkCameraCollision = (cameraX, cameraZ) => {
  const cameraBox = new THREE.Box3().setFromObject(camera);
  cameraBox.translate(new THREE.Vector3(cameraX - camera.position.x, 0, cameraZ - camera.position.z));
  return walls.some(wall => {
    const wallBox = new THREE.Box3().setFromObject(wall);
    return cameraBox.intersectsBox(wallBox);
  });
};


// Систем за поени
let score = 0;
const updateHUD = (color) => {
  const hud = document.getElementById('hud');
  hud.textContent = `Поени: ${score} / ${maxScore}`; // Динамички го прикажува maxScore

  // Привремена промена на бојата на HUD
  if (color) {
    hud.style.color = color; // Постави ја бојата на текстот
    setTimeout(() => {
      hud.style.color = 'white'; // Врати ја на оригиналната боја
    }, 300);
  }
};



const showQuestion = (questionObj) => {
  isQuestionActive = true; // Означи дека прашањето е активно

  const modal = document.getElementById('question-modal');
  const questionText = document.getElementById('question-text');
  const answerButtons = document.getElementById('answer-buttons');

  modal.style.display = 'block';
  questionText.textContent = questionObj.question;
  answerButtons.innerHTML = '';
  
  questionObj.options.forEach((option, index) => {
    const button = document.createElement('button');
    button.textContent = option;
    button.style.backgroundColor = index === 0 ? "#4CAF50" : index === 1 ? "#FFC107" : index === 2 ? "#F44336" : "#2196F3"; // Unique colors
    
    button.addEventListener('click', () => {
      isQuestionActive = false; // Означи дека прашањето е затворено

      if (index === questionObj.correct) {
        // Точен одговор
        score++;
        button.style.backgroundColor = 'green'; // Зелено копче
        updateHUD('green'); // Позеленување на поени
        if (score === maxScore) {
          alert('Честитки! Го освоивте лавиринтот!');
        }
      } else {
        // Погрешен одговор
        if (score > 0) {
          score--; // Одземање на поени
        }
        button.style.backgroundColor = 'red'; // Црвено копче
        updateHUD('red'); // Поцрвенување на поени
      }

      setTimeout(() => {
        modal.style.display = 'none'; // Затвори го модалот по мала пауза
        button.style.backgroundColor = ''; // Врати ја оригиналната боја на копчето
      }, 300);
    });
    answerButtons.appendChild(button);
  });
};



// Анимација
const speed = 0.8;
const rotationSpeed = Math.PI / 90;
let isQuestionActive = false; // Дали прашањето е активно

window.addEventListener('resize', () => {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});

const animate = () => {
  requestAnimationFrame(animate);
  
  spheres.forEach((sphere) => {
  sphere.rotation.y += 0.01; // Ротирај ја топката
  sphere.scale.setScalar(1 + 0.1 * Math.sin(Date.now() * 0.005)); // Пулсирање
});

  
  

  // Ротација на играчот (автомобилот)
if (!isQuestionActive) { // Проверка дали нема активно прашање
  if (rotateLeft) {
    player.rotation.y += rotationSpeed; // Ротација налево
  }
  if (rotateRight) {
    player.rotation.y -= rotationSpeed; // Ротација надесно
  }
}


  // Движење на играч (автомобил) врз основа на ротацијата
  
  if (!isQuestionActive) { // Провери дали нема активно прашање
  // Движење на играч (автомобил)
  let moveX = 0, moveZ = 0;

  if (moveForward) {
    moveX -= Math.sin(player.rotation.y) * speed;
    moveZ -= Math.cos(player.rotation.y) * speed;
  }
  if (moveBackward) {
    moveX += Math.sin(player.rotation.y) * speed;
    moveZ += Math.cos(player.rotation.y) * speed;
  }

  // Пресметка за нова позиција
  const newX = player.position.x + moveX;
  const newZ = player.position.z + moveZ;

  // Проверка на колизија
  const carBox = new THREE.Box3().setFromObject(player); // Кутија за автомобилот
  carBox.translate(new THREE.Vector3(moveX, 0, moveZ)); // Пресметка на новата позиција на кутијата

  let collisionDetected = walls.some(wall => {
    const wallBox = new THREE.Box3().setFromObject(wall); // Кутија за секој ѕид
    return carBox.intersectsBox(wallBox); // Проверка за колизија
  });

  // Ако нема колизија, ажурирај ја позицијата
  if (!collisionDetected) {
    player.position.x = newX;
    player.position.z = newZ;
  }
}


  // Камерата го следи играчот (автомобилот)
  camera.position.set(
    player.position.x - Math.sin(player.rotation.y) * 10,
    5,
    player.position.z - Math.cos(player.rotation.y) * 10
  );
  camera.lookAt(player.position); // Камерата секогаш гледа кон играчот

  // Логика за собирање на топки
  spheres.forEach((sphere, index) => {
    if (player.position.distanceTo(sphere.position) < 1.5) {
  // Светкање или ефект при собирање
  const collectEffect = new THREE.PointLight(0xffd700, 1, 100); // Жолта светлина
  collectEffect.position.copy(sphere.position);
  scene.add(collectEffect);

  setTimeout(() => scene.remove(collectEffect), 500); // Отстрани го ефектот по 500ms

  // Останати постоечки функции
  scene.remove(sphere);
  spheres.splice(index, 1);
  const question = usedQuestions.splice(index, 1)[0];
  showQuestion(question);
}

  if (player.position.distanceTo(sphere.position) < 1.5) { // Проверка дали играчот е блиску до топка
    scene.remove(sphere); // Отстрани ја топката од сцената
    spheres.splice(index, 1); // Отстрани ја топката од низата

    // Избери и отстрани уникатно прашање од листата
    const question = usedQuestions.splice(index, 1)[0];
    showQuestion(question); // Прикажи го соодветното прашање
  }
  
});


  renderer.render(scene, camera);
};



let maxScore = 10; // Почетна вредност за лесно

// Логика за избор на тежина
const difficultyMenu = document.getElementById('difficulty-menu');

document.getElementById('easy-button').addEventListener('click', () => {
  document.body.style.backgroundColor = 'green'; // Зелена позадина
  maxScore = 10; // Поени за победа
  score = 0; // Осигурај се дека поените се ресетирани
  document.getElementById('hud').textContent = `Поени: ${score} / ${maxScore}`; // Ажурирај го HUD веднаш
  startGame();
});

document.getElementById('medium-button').addEventListener('click', () => {
  document.body.style.backgroundColor = 'orange'; // Портокалова позадина
  maxScore = 25; // Поени за победа
  score = 0; // Осигурај се дека поените се ресетирани
  document.getElementById('hud').textContent = `Поени: ${score} / ${maxScore}`; // Ажурирај го HUD веднаш
  startGame();
});

document.getElementById('hard-button').addEventListener('click', () => {
  document.body.style.backgroundColor = 'red'; // Црвена позадина
  maxScore = 50; // Поени за победа
  score = 0; // Осигурај се дека поените се ресетирани
  document.getElementById('hud').textContent = `Поени: ${score} / ${maxScore}`; // Ажурирај го HUD веднаш
  startGame();
});


// Функција за стартување на играта
const startGame = () => {
  difficultyMenu.style.display = 'none'; // Скриј го менито
  // Додај ја потребната логика за почеток на играта тука
  animate(); // Започни ја анимацијата ако е тоа централна функција
};

</script>
</body>
</html>
